<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Health Advisor</title>
    <style>
        :root {
            --primary: #4285f4;
            --primary-dark: #3267d6;
            --secondary: #34c759;
            --accent: #ff4081;
            --warning: #f4b400;
            --danger: #db4437;
            --gray: #4b5563;
            --light: #f8fafc;
            --dark: #1f2937;
            --white: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Arial, sans-serif;
        }

        body {
            background: #f1f5f9;
            color: var(--dark);
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px;
        }

        header {
            background: linear-gradient(45deg, var(--primary), var(--primary-dark));
            color: var(--white);
            padding: 20px 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 30px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo i {
            font-size: 2.2rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .logo h1 {
            font-size: 2rem;
            font-weight: 700;
        }

        .header-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .theme-toggle, .voice-toggle {
            background: transparent;
            border: none;
            color: var(--white);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
        }

        .theme-toggle:hover, .voice-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        main {
            margin-top: 40px;
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 30px;
        }

        @media (max-width: 1024px) {
            main {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--white);
            border-radius: 16px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
            padding: 25px;
            margin-bottom: 25px;
            animation: slideInUp 0.6s ease-out;
        }

        @keyframes slideInUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .card-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--gray);
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 1rem;
            background: #f9fafb;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 8px rgba(66, 133, 244, 0.2);
            transform: translateY(-1px);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--secondary);
            color: var(--white);
        }

        .btn-secondary:hover {
            background: #2d9549;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: var(--danger);
            color: var(--white);
        }

        .btn-danger:hover {
            background: #d62516;
            transform: translateY(-2px);
        }

        .actions {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            margin-top: 20px;
        }

        .symptoms-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .symptom-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .symptom-search {
            margin-bottom: 20px;
        }

        .symptom-search input {
            padding: 10px;
            font-size: 1rem;
        }

        .bmi-calculator {
            background: #e8f0fe;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .bmi-result {
            margin-top: 15px;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .health-metrics-chart {
            width: 100%;
            height: 300px;
            margin-top: 25px;
        }

        .tab-navigation {
            display: flex;
            margin-bottom: 25px;
            border-bottom: 2px solid #e5e7eb;
        }

        .tab-item {
            padding: 12px 24px;
            cursor: pointer;
            font-weight: 600;
            color: var(--gray);
            position: relative;
        }

        .tab-item.active {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
        }

        .tab-item:hover {
            color: var(--primary);
            background: rgba(66, 133, 244, 0.1);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .recommendation-item {
            border-left: 5px solid var(--primary);
            padding: 15px 20px;
            margin-bottom: 20px;
            background: #f3f8ff;
            border-radius: 0 8px 8px 0;
            animation: fadeInRight 0.5s ease-out;
        }

        @keyframes fadeInRight {
            from { transform: translateX(20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .recommendation-title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 8px;
            font-size: 1.2rem;
        }

        .medication-reminder {
            background: #fff8e1;
            padding: 20px;
            border-radius: 12px;
            margin-top: 25px;
            border-left: 5px solid var(--warning);
        }

        .reminder-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }

        .reminder-time {
            font-weight: 600;
            color: var(--warning);
        }

        .history-item {
            padding: 20px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            border-radius: 8px;
        }

        .history-item:hover {
            background: #f5f5f5;
            transform: translateY(-2px);
        }

        .loader {
            display: none;
            text-align: center;
            padding: 25px;
        }

        .loader-spinner {
            width: 48px;
            height: 48px;
            border: 5px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 5px solid var(--primary);
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .notification {
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 15px 25px;
            background: var(--primary);
            color: var(--white);
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transform: translateY(100px);
            opacity: 0;
            z-index: 1000;
        }

        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        .accessibility-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .font-size-controls, .language-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .font-size-btn, .language-btn {
            padding: 8px 12px;
            background: #e5e7eb;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
        }

        .font-size-btn.active, .language-btn.active {
            background: var(--primary);
            color: var(--white);
        }

        body.large-font {
            font-size: 18px;
        }

        body.x-large-font {
            font-size: 22px;
        }

        .chat-section {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            margin-top: 25px;
        }

        .chat-messages {
            max-height: 300px;
            overflow-y: auto;
            background: var(--white);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .chat-message {
            margin: 10px 0;
            padding: 12px;
            border-radius: 8px;
        }

        .user-message {
            background: var(--primary);
            color: var(--white);
            margin-left: 25%;
            margin-right: 10px;
        }

        .bot-message {
            background: #e5e7eb;
            color: var(--dark);
            margin-right: 25%;
            margin-left: 10px;
        }

        .chat-input {
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
        }

        .health-tips {
            background: #ecfdf5;
            padding: 20px;
            border-radius: 12px;
            margin-top: 25px;
            border-left: 5px solid var(--secondary);
        }

        .tip-item {
            margin-bottom: 15px;
            padding-left: 10px;
            border-left: 3px solid var(--secondary);
        }

        .ai-assistant {
            position: fixed;
            bottom: 80px;
            right: 30px;
            background: var(--accent);
            color: var(--white);
            padding: 15px;
            border-radius: 50%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            z-index: 1000;
        }

        .ai-assistant:hover {
            transform: scale(1.1);
        }

        body.dark-mode {
            background: linear-gradient(135deg, var(--dark), #2c2c2c);
            color: var(--light);
        }

        body.dark-mode .card {
            background: #2c2c2c;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        body.dark-mode input,
        body.dark-mode select,
        body.dark-mode textarea {
            background: #3c3c3c;
            border-color: #4c4c4c;
            color: var(--light);
        }

        body.dark-mode .recommendation-item {
            background: #2a3a5a;
        }

        body.dark-mode .medication-reminder {
            background: #3c3520;
        }

        body.dark-mode .health-tips {
            background: #2a3a5a;
        }

        body.dark-mode .chat-section {
            background: #3c3c3c;
        }

        body.dark-mode .chat-messages {
            background: #4c4c4c;
        }

        body.dark-mode .bot-message {
            background: #5c5c5c;
            color: var(--light);
        }

        @media print {
            header, .sidebar, .actions, #addMedicationForm, .chat-section, .ai-assistant, .notification {
                display: none;
            }

            body, .card {
                background: white !important;
                color: black !important;
            }

            main {
                grid-template-columns: 1fr !important;
            }
        }

        .quick-replies {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .quick-replies button {
            font-size: 0.9em;
            padding: 8px 12px;
        }

        .typing-indicator {
            display: inline-flex;
            padding: 10px;
            background: #f0f0f0;
            border-radius: 15px;
        }

        .dot {
            width: 8px;
            height: 8px;
            margin: 0 3px;
            background: #ccc;
            border-radius: 50%;
            animation: bounce 1.4s infinite;
        }

        .dot:nth-child(2) { animation-delay: 0.2s; }
        .dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes bounce {
            0%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-5px); }
        }

        body.dark-mode .typing-indicator {
            background: #3c3c3c;
        }

        body.dark-mode .dot {
            background: #666;
        }

        .health-goals {
            background: #fef3c7;
            padding: 20px;
            border-radius: 12px;
            margin-top: 25px;
            border-left: 5px solid var(--warning);
        }

        .goal-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }

        .goal-progress {
            width: 100%;
            height: 10px;
            background: #e5e7eb;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
        }

        .goal-progress-bar {
            height: 100%;
            background: var(--secondary);
            transition: width 0.5s ease;
        }

        .health-quiz {
            background: #f3e8ff;
            padding: 20px;
            border-radius: 12px;
            margin-top: 25px;
            border-left: 5px solid var(--accent);
        }

        .quiz-question {
            margin-bottom: 20px;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            padding: 10px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            cursor: pointer;
        }

        .quiz-option:hover {
            background: #f3f8ff;
        }

        .quiz-option.correct {
            background: #ecfdf5;
            border-color: var(--secondary);
        }

        .quiz-option.incorrect {
            background: #ffebee;
            border-color: var(--danger);
        }

        body.dark-mode .health-goals {
            background: #3c3520;
        }

        body.dark-mode .health-quiz {
            background: #2a3a5a;
        }

        body.dark-mode .quiz-option {
            border-color: #4c4c4c;
            background: #3c3c3c;
        }

        body.dark-mode .quiz-option:hover {
            background: #4c4c4c;
        }

        body.dark-mode .quiz-option.correct {
            background: #2a3a5a;
        }

        body.dark-mode .quiz-option.incorrect {
            background: #3c2a2a;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-heartbeat"></i>
                <h1>Smart Health Advisor</h1>
            </div>
            <div class="header-controls">
                <button id="voiceToggle" class="voice-toggle" title="Toggle Voice Input" aria-label="Toggle voice input">
                    <i class="fas fa-microphone"></i>
                </button>
                <button id="themeToggle" class="theme-toggle" title="Toggle Theme" aria-label="Toggle theme">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="accessibility-controls card">
            <div class="font-size-controls">
                <span>Font Size:</span>
                <button id="normalFont" class="font-size-btn active">A</button>
                <button id="largeFont" class="font-size-btn">A+</button>
                <button id="xLargeFont" class="font-size-btn">A++</button>
            </div>
            <div class="language-controls">
                <span>Language:</span>
                <button id="langEn" class="language-btn active">EN</button>
                <button id="langEs" class="language-btn">ES</button>
                <button id="langFr" class="language-btn">FR</button>
            </div>
        </div>

        <main>
            <aside class="sidebar">
                <div class="card">
                    <h2 class="card-title"><i class="fas fa-user-circle"></i> User Profile</h2>
                    <form id="userProfileForm">
                        <div class="form-group">
                            <label for="userName">Name</label>
                            <input type="text" id="userName" placeholder="Enter your name">
                        </div>
                        <div class="form-group">
                            <label for="userAge">Age</label>
                            <input type="number" id="userAge" placeholder="Years" min="1" max="120">
                        </div>
                        <div class="form-group">
                            <label for="userGender">Gender</label>
                            <select id="userGender">
                                <option value="">Select</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="userHeight">Height (cm)</label>
                            <input type="number" id="userHeight" placeholder="cm" min="50" max="250">
                        </div>
                        <div class="form-group">
                            <label for="userWeight">Weight (kg)</label>
                            <input type="number" id="userWeight" placeholder="kg" min="1" max="500">
                        </div>
                        <div class="form-group">
                            <label for="lifestyle">Lifestyle</label>
                            <textarea id="lifestyle" placeholder="E.g., smoking, exercise, diet" rows="3"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Existing Conditions</label>
                            <div class="symptoms-list">
                                <div class="symptom-item"><input type="checkbox" id="condition1" value="Diabetes"><label for="condition1">Diabetes</label></div>
                                <div class="symptom-item"><input type="checkbox" id="condition2" value="Hypertension"><label for="condition2">Hypertension</label></div>
                                <div class="symptom-item"><input type="checkbox" id="condition3" value="Asthma"><label for="condition3">Asthma</label></div>
                                <div class="symptom-item"><input type="checkbox" id="condition4" value="Heart Disease"><label for="condition4">Heart Disease</label></div>
                                <div class="symptom-item"><input type="checkbox" id="condition5" value="Thyroid Issues"><label for="condition5">Thyroid Issues</label></div>
                            </div>
                        </div>
                        <div class="bmi-calculator">
                            <h3>BMI Calculator</h3>
                            <div class="bmi-result" id="bmiResult">Fill in height and weight to calculate BMI</div>
                        </div>
                        <div class="actions">
                            <button type="button" class="btn btn-secondary" id="saveProfileBtn">Save Profile</button>
                            <button type="button" class="btn btn-primary" id="exportProfileBtn">Export as PDF</button>
                        </div>
                    </form>
                </div>

                <div class="card">
                    <h2 class="card-title"><i class="fas fa-pills"></i> Medication Reminders</h2>
                    <div id="medicationList" class="reminder-list">
                        <p>No medications added yet.</p>
                    </div>
                    <form id="addMedicationForm" style="margin-top: 20px;">
                        <div class="form-group">
                            <label for="medicationName">Medication Name</label>
                            <input type="text" id="medicationName" placeholder="Enter medication name">
                        </div>
                        <div class="form-group">
                            <label for="medicationTime">Time</label>
                            <input type="time" id="medicationTime">
                        </div>
                        <div class="form-group">
                            <label for="medicationDosage">Dosage</label>
                            <input type="text" id="medicationDosage" placeholder="e.g., 1 pill">
                        </div>
                        <div class="form-group">
                            <label for="medicationFrequency">Frequency</label>
                            <select id="medicationFrequency">
                                <option value="daily">Daily</option>
                                <option value="weekly">Weekly</option>
                                <option value="as-needed">As Needed</option>
                            </select>
                        </div>
                        <div class="actions">
                            <button type="button" class="btn btn-primary" id="addMedicationBtn">Add Medication</button>
                        </div>
                    </form>
                </div>

                <div class="card health-goals">
                    <h2 class="card-title"><i class="fas fa-trophy"></i> Health Goals</h2>
                    <div id="healthGoalsList">
                        <p>No goals added yet.</p>
                    </div>
                    <form id="addGoalForm" style="margin-top: 20px;">
                        <div class="form-group">
                            <label for="goalType">Goal Type</label>
                            <select id="goalType">
                                <option value="steps">Daily Steps</option>
                                <option value="water">Water Intake (glasses)</option>
                                <option value="sleep">Sleep Hours</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="goalTarget">Target</label>
                            <input type="number" id="goalTarget" placeholder="e.g., 10000 for steps" min="1">
                        </div>
                        <div class="form-group">
                            <label for="goalProgress">Current Progress</label>
                            <input type="number" id="goalProgress" placeholder="e.g., 5000 for steps" min="0">
                        </div>
                        <div class="actions">
                            <button type="button" class="btn btn-primary" id="addGoalBtn">Add Goal</button>
                        </div>
                    </form>
                </div>

                <div class="card health-tips">
                    <h2 class="card-title"><i class="fas fa-leaf"></i> Daily Health Tips</h2>
                    <div id="healthTips"></div>
                </div>

                <div class="card health-quiz">
                    <h2 class="card-title"><i class="fas fa-question-circle"></i> Daily Health Quiz</h2>
                    <div id="quizContent">
                        <p>Take today's quiz to learn more about health!</p>
                    </div>
                    <div class="actions">
                        <button type="button" class="btn btn-primary" id="startQuizBtn">Start Quiz</button>
                    </div>
                </div>
            </aside>

            <section class="main-content">
                <div class="tab-navigation">
                    <div class="tab-item active" data-tab="symptoms">Symptom Checker</div>
                    <div class="tab-item" data-tab="recommendations">Recommendations</div>
                    <div class="tab-item" data-tab="history">History</div>
                    <div class="tab-item" data-tab="health-data">Health Data</div>
                    <div class="tab-item" data-tab="chat">AI Chat</div>
                </div>

                <div id="symptomsTab" class="tab-content active">
                    <div class="card">
                        <h2 class="card-title"><i class="fas fa-clipboard-list"></i> Symptom Checker</h2>
                        <p>Select the symptoms you are experiencing or use voice input:</p>
                        <div class="symptom-search form-group">
                            <input type="text" id="symptomSearch" placeholder="Search symptoms...">
                        </div>
                        <div class="symptoms-list" id="symptomsList">
                            <div class="symptom-item"><input type="checkbox" id="symptom1" value="Headache"><label for="symptom1">Headache</label></div>
                            <div class="symptom-item"><input type="checkbox" id="symptom2" value="Fever"><label for="symptom2">Fever</label></div>
                            <div class="symptom-item"><input type="checkbox" id="symptom3" value="Cough"><label for="symptom3">Cough</label></div>
                            <div class="symptom-item"><input type="checkbox" id="symptom4" value="Fatigue"><label for="symptom4">Fatigue</label></div>
                            <div class="symptom-item"><input type="checkbox" id="symptom5" value="Shortness of Breath"><label for="symptom5">Shortness of Breath</label></div>
                            <div class="symptom-item"><input type="checkbox" id="symptom6" value="Sore Throat"><label for="symptom6">Sore Throat</label></div>
                            <div class="symptom-item"><input type="checkbox" id="symptom7" value="Nausea"><label for="symptom7">Nausea</label></div>
                            <div class="symptom-item"><input type="checkbox" id="symptom8" value="Diarrhea"><label for="symptom8">Diarrhea</label></div>
                            <div class="symptom-item"><input type="checkbox" id="symptom9" value="Joint Pain"><label for="symptom9">Joint Pain</label></div>
                            <div class="symptom-item"><input type="checkbox" id="symptom10" value="Chest Pain"><label for="symptom10">Chest Pain</label></div>
                            <div class="symptom-item"><input type="checkbox" id="symptom11" value="Dizziness"><label for="symptom11">Dizziness</label></div>
                            <div class="symptom-item"><input type="checkbox" id="symptom12" value="Abdominal Pain"><label for="symptom12">Abdominal Pain</label></div>
                            <div class="symptom-item"><input type="checkbox" id="symptom13" value="Rash"><label for="symptom13">Rash</label></div>
                            <div class="symptom-item"><input type="checkbox" id="symptom14" value="Vomiting"><label for="symptom14">Vomiting</label></div>
                            <div class="symptom-item"><input type="checkbox" id="symptom15" value="Muscle Aches"><label for="symptom15">Muscle Aches</label></div>
                        </div>
                        <div class="form-group">
                            <label for="symptomDetails">Additional Details</label>
                            <textarea id="symptomDetails" placeholder="Describe your symptoms in detail" rows="4"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="symptomDuration">Duration of Symptoms</label>
                            <select id="symptomDuration">
                                <option value="1">Less than 24 hours</option>
                                <option value="2">1-3 days</option>
                                <option value="3">3-7 days</option>
                                <option value="4">1-2 weeks</option>
                                <option value="5">More than 2 weeks</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="symptomSeverity">Severity</label>
                            <select id="symptomSeverity">
                                <option value="1">Mild</option>
                                <option value="2">Moderate</option>
                                <option value="3">Severe</option>
                            </select>
                        </div>
                        <div class="actions">
                            <button type="button" class="btn btn-primary" id="analyzeBtn">Analyze Symptoms</button>
                        </div>
                    </div>
                    <div id="loader" class="loader">
                        <div class="loader-spinner"></div>
                        <p>Analyzing your symptoms...</p>
                    </div>
                </div>

                <div id="recommendationsTab" class="tab-content">
                    <div class="card recommendations-section">
                        <h2 class="card-title"><i class="fas fa-heartbeat"></i> Health Recommendations</h2>
                        <div id="recommendationsList">
                            <p>Complete your profile and analyze symptoms to get personalized recommendations.</p>
                        </div>
                        <div class="actions" style="margin-top: 25px;">
                            <button type="button" class="btn btn-secondary" id="printRecommendationsBtn">
                                <i class="fas fa-print"></i> Print
                            </button>
                            <button type="button" class="btn btn-primary" id="saveRecommendationsBtn">
                                <i class="fas fa-save"></i> Save to History
                            </button>
                            <button type="button" class="btn btn-primary" id="shareRecommendationsBtn">
                                <i class="fas fa-share"></i> Share
                            </button>
                        </div>
                    </div>
                </div>

                <div id="historyTab" class="tab-content">
                    <div class="card history-section">
                        <h2 class="card-title"><i class="fas fa-history"></i> Health Check History</h2>
                        <div id="historyList">
                            <p>No history records found.</p>
                        </div>
                        <div class="actions">
                            <button type="button" class="btn btn-primary" id="exportHistoryBtn">Export as PDF</button>
                        </div>
                    </div>
                </div>

                <div id="healthDataTab" class="tab-content">
                    <div class="card health-data-section">
                        <h2 class="card-title"><i class="fas fa-chart-line"></i> Health Metrics</h2>
                        <canvas id="healthMetricsChart" class="health-metrics-chart"></canvas>
                        <div class="form-group" style="margin-top: 25px;">
                            <label for="bloodPressure">Blood Pressure (mmHg)</label>
                            <input type="text" id="bloodPressure" placeholder="e.g., 120/80">
                        </div>
                        <div class="form-group">
                            <label for="bloodSugar">Blood Sugar (mg/dL)</label>
                            <input type="number" id="bloodSugar" placeholder="mg/dL">
                        </div>
                        <div class="form-group">
                            <label for="cholesterol">Cholesterol (mg/dL)</label>
                            <input type="number" id="cholesterol" placeholder="mg/dL">
                        </div>
                        <div class="form-group">
                            <label for="heartRate">Heart Rate (bpm)</label>
                            <input type="number" id="heartRate" placeholder="bpm">
                        </div>
                        <div class="form-group">
                            <label for="activityLevel">Activity Level (steps/day)</label>
                            <input type="number" id="activityLevel" placeholder="Steps">
                        </div>
                        <div class="actions">
                            <button type="button" class="btn btn-primary" id="saveHealthDataBtn">Save Data</button>
                            <button type="button" class="btn btn-primary" id="exportHealthDataBtn">Export as PDF</button>
                        </div>
                    </div>
                </div>

                <div id="chatTab" class="tab-content">
                    <div class="card chat-section">
                        <h2 class="card-title"><i class="fas fa-robot"></i> AI Health Assistant</h2>
                        <div class="chat-messages" id="chatMessages"></div>
                        <div class="chat-input">
                            <input type="text" id="chatInput" placeholder="Ask a health question...">
                            <button type="button" class="btn btn-primary" onclick="sendChatMessage()">Send</button>
                        </div>
                        <div class="quick-replies" id="quickReplies">
                            <button class="btn btn-secondary" onclick="sendQuickReply('What is a healthy diet?')">Healthy Diet</button>
                            <button class="btn btn-secondary" onclick="sendQuickReply('How much exercise do I need?')">Exercise Needs</button>
                            <button class="btn btn-secondary" onclick="sendQuickReply('How can I reduce stress?')">Reduce Stress</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <div id="notification" class="notification">
        Notification message here
    </div>

    <div class="ai-assistant" id="aiAssistant" title="AI Assistant">
        <i class="fas fa-robot"></i>
    </div>

    <script>
        // DOM elements
        const themeToggle = document.getElementById('themeToggle');
        const voiceToggle = document.getElementById('voiceToggle');
        const normalFontBtn = document.getElementById('normalFont');
        const largeFontBtn = document.getElementById('largeFont');
        const xLargeFontBtn = document.getElementById('xLargeFont');
        const langEnBtn = document.getElementById('langEn');
        const langEsBtn = document.getElementById('langEs');
        const langFrBtn = document.getElementById('langFr');
        const userHeightInput = document.getElementById('userHeight');
        const userWeightInput = document.getElementById('userWeight');
        const bmiResultDiv = document.getElementById('bmiResult');
        const saveProfileBtn = document.getElementById('saveProfileBtn');
        const exportProfileBtn = document.getElementById('exportProfileBtn');
        const addMedicationBtn = document.getElementById('addMedicationBtn');
        const medicationList = document.getElementById('medicationList');
        const addGoalBtn = document.getElementById('addGoalBtn');
        const healthGoalsList = document.getElementById('healthGoalsList');
        const tabItems = document.querySelectorAll('.tab-item');
        const tabContents = document.querySelectorAll('.tab-content');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const symptomSearch = document.getElementById('symptomSearch');
        const symptomsList = document.getElementById('symptomsList');
        const loader = document.getElementById('loader');
        const recommendationsList = document.getElementById('recommendationsList');
        const printRecommendationsBtn = document.getElementById('printRecommendationsBtn');
        const saveRecommendationsBtn = document.getElementById('saveRecommendationsBtn');
        const shareRecommendationsBtn = document.getElementById('shareRecommendationsBtn');
        const historyList = document.getElementById('historyList');
        const exportHistoryBtn = document.getElementById('exportHistoryBtn');
        const saveHealthDataBtn = document.getElementById('saveHealthDataBtn');
        const exportHealthDataBtn = document.getElementById('exportHealthDataBtn');
        const healthTipsDiv = document.getElementById('healthTips');
        const quizContent = document.getElementById('quizContent');
        const startQuizBtn = document.getElementById('startQuizBtn');
        const aiAssistant = document.getElementById('aiAssistant');
        const notificationDiv = document.getElementById('notification');
        const chatInput = document.getElementById('chatInput');
        const chatMessages = document.getElementById('chatMessages');
        const quickReplies = document.getElementById('quickReplies');

        // Chart initialization
        let healthMetricsChart;
        const healthMetricsChartCtx = document.getElementById('healthMetricsChart').getContext('2d');

        // Speech recognition
        let recognition;
        if ('webkitSpeechRecognition' in window) {
            recognition = new webkitSpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.lang = 'en-US';
        }

        // Language translations
        const translations = {
            en: {
                title: 'Smart Health Advisor',
                profile: 'User Profile',
                saveProfile: 'Save Profile',
                exportProfile: 'Export as PDF',
                medication: 'Medication Reminders',
                addMedication: 'Add Medication',
                goals: 'Health Goals',
                addGoal: 'Add Goal',
                symptoms: 'Symptom Checker',
                analyze: 'Analyze Symptoms',
                recommendations: 'Health Recommendations',
                history: 'Health Check History',
                exportHistory: 'Export as PDF',
                healthData: 'Health Metrics',
                exportHealthData: 'Export as PDF',
                chat: 'AI Health Assistant',
                bmi: 'BMI Calculator',
                healthTips: 'Daily Health Tips',
                quiz: 'Daily Health Quiz',
                startQuiz: 'Start Quiz',
                print: 'Print',
                save: 'Save to History',
                share: 'Share'
            },
            es: {
                title: 'Asesor de Salud Inteligente',
                profile: 'Perfil de Usuario',
                saveProfile: 'Guardar Perfil',
                exportProfile: 'Exportar como PDF',
                medication: 'Recordatorios de Medicación',
                addMedication: 'Agregar Medicación',
                goals: 'Metas de Salud',
                addGoal: 'Agregar Meta',
                symptoms: 'Comprobador de Síntomas',
                analyze: 'Analizar Síntomas',
                recommendations: 'Recomendaciones de Salud',
                history: 'Historial de Chequeos',
                exportHistory: 'Exportar como PDF',
                healthData: 'Métricas de Salud',
                exportHealthData: 'Exportar como PDF',
                chat: 'Asistente de Salud IA',
                bmi: 'Calculadora de IMC',
                healthTips: 'Consejos Diarios de Salud',
                quiz: 'Cuestionario Diario de Salud',
                startQuiz: 'Iniciar Cuestionario',
                print: 'Imprimir',
                save: 'Guardar en Historial',
                share: 'Compartir'
            },
            fr: {
                title: 'Conseiller Santé Intelligent',
                profile: 'Profil Utilisateur',
                saveProfile: 'Enregistrer le Profil',
                exportProfile: 'Exporter en PDF',
                medication: 'Rappels de Médicaments',
                addMedication: 'Ajouter un Médicament',
                goals: 'Objectifs de Santé',
                addGoal: 'Ajouter un Objectif',
                symptoms: 'Vérificateur de Symptômes',
                analyze: 'Analyser les Symptômes',
                recommendations: 'Recommandations de Santé',
                history: 'Historique des Contrôles',
                exportHistory: 'Exporter en PDF',
                healthData: 'Métriques de Santé',
                exportHealthData: 'Exporter en PDF',
                chat: 'Assistant Santé IA',
                // bmi: 'Calculateur d'IMC',
                healthTips: 'Conseils de Santé Quotidiens',
                quiz: 'Quiz Santé Quotidien',
                startQuiz: 'Démarrer le Quiz',
                print: 'Imprimer',
                // save: 'Enregistrer dans l'Historique',
                share: 'Partager'
            }
        };

        // Quiz data
        const quizQuestions = [
            {
                question: "What is the recommended daily water intake for adults?",
                options: ["1 liter", "2 liters", "3 liters", "4 liters"],
                correct: "2 liters"
            },
            {
                question: "How many minutes of exercise should adults get per week?",
                options: ["60 minutes", "90 minutes", "120 minutes", "150 minutes"],
                correct: "150 minutes"
            },
            {
                question: "Which nutrient is most important for muscle repair?",
                options: ["Carbohydrates", "Protein", "Fats", "Vitamins"],
                correct: "Protein"
            }
        ];

        // Initialize application
        function initApp() {
            setupEventListeners();
            loadUserProfile();
            loadMedications();
            loadHealthGoals();
            loadHealthHistory();
            calculateBMI();
            initHealthMetricsChart();
            checkMedicationReminders();
            displayHealthTips();
            displayDailyQuiz();
            setLanguage('en');
        }

        // Set up event listeners
        function setupEventListeners() {
            themeToggle.addEventListener('click', toggleTheme);
            voiceToggle.addEventListener('click', toggleVoiceInput);
            normalFontBtn.addEventListener('click', () => setFontSize('normal'));
            largeFontBtn.addEventListener('click', () => setFontSize('large'));
            xLargeFontBtn.addEventListener('click', () => setFontSize('x-large'));
            langEnBtn.addEventListener('click', () => setLanguage('en'));
            langEsBtn.addEventListener('click', () => setLanguage('es'));
            langFrBtn.addEventListener('click', () => setLanguage('fr'));
            userHeightInput.addEventListener('input', calculateBMI);
            userWeightInput.addEventListener('input', calculateBMI);
            saveProfileBtn.addEventListener('click', saveUserProfile);
            exportProfileBtn.addEventListener('click', exportProfileAsPDF);
            addMedicationBtn.addEventListener('click', addMedication);
            addGoalBtn.addEventListener('click', addHealthGoal);
            tabItems.forEach(tab => tab.addEventListener('click', () => switchTab(tab.dataset.tab)));
            symptomSearch.addEventListener('input', filterSymptoms);
            analyzeBtn.addEventListener('click', analyzeSymptoms);
            printRecommendationsBtn.addEventListener('click', printRecommendations);
            saveRecommendationsBtn.addEventListener('click', saveToHistory);
            shareRecommendationsBtn.addEventListener('click', shareRecommendations);
            exportHistoryBtn.addEventListener('click', exportHistoryAsPDF);
            saveHealthDataBtn.addEventListener('click', saveHealthData);
            exportHealthDataBtn.addEventListener('click', exportHealthDataAsPDF);
            startQuizBtn.addEventListener('click', startDailyQuiz);
            aiAssistant.addEventListener('click', () => switchTab('chat'));
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendChatMessage();
            });
        }

        // Toggle theme
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const isDarkMode = document.body.classList.contains('dark-mode');
            themeToggle.innerHTML = isDarkMode ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
            localStorage.setItem('darkMode', isDarkMode);
        }

        // Toggle voice input
        function toggleVoiceInput() {
            if (!recognition) {
                showNotification('Voice input not supported in this browser!', 'error');
                return;
            }
            voiceToggle.classList.toggle('active');
            if (voiceToggle.classList.contains('active')) {
                const lang = localStorage.getItem('language') || 'en';
                recognition.lang = { en: 'en-US', es: 'es-ES', fr: 'fr-FR' }[lang];
                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('symptomDetails').value += transcript + '\n';
                    showNotification('Voice input recorded!');
                };
                recognition.onerror = () => {
                    showNotification('Error with voice input!', 'error');
                };
                recognition.onend = () => {
                    voiceToggle.classList.remove('active');
                    showNotification('Voice input stopped.');
                };
                recognition.start();
                showNotification('Voice input started. Speak now...');
            } else {
                recognition.stop();
            }
        }

        // Set font size
        function setFontSize(size) {
            document.body.classList.remove('large-font', 'x-large-font');
            if (size === 'large') document.body.classList.add('large-font');
            if (size === 'x-large') document.body.classList.add('x-large-font');
            [normalFontBtn, largeFontBtn, xLargeFontBtn].forEach(btn => btn.classList.remove('active'));
            document.getElementById(`${size}Font`).classList.add('active');
            localStorage.setItem('fontSize', size);
        }

        // Set language
        function setLanguage(lang) {
            const t = translations[lang];
            document.querySelector('.logo h1').textContent = t.title;
            document.querySelector('.card-title:has(.fa-user-circle)').textContent = t.profile;
            saveProfileBtn.textContent = t.saveProfile;
            exportProfileBtn.textContent = t.exportProfile;
            document.querySelector('.card-title:has(.fa-pills)').textContent = t.medication;
            addMedicationBtn.textContent = t.addMedication;
            document.querySelector('.card-title:has(.fa-trophy)').textContent = t.goals;
            addGoalBtn.textContent = t.addGoal;
            document.querySelector('.tab-item[data-tab="symptoms"]').textContent = t.symptoms;
            analyzeBtn.textContent = t.analyze;
            document.querySelector('.tab-item[data-tab="recommendations"]').textContent = t.recommendations;
            document.querySelector('.tab-item[data-tab="history"]').textContent = t.history;
            exportHistoryBtn.textContent = t.exportHistory;
            document.querySelector('.tab-item[data-tab="health-data"]').textContent = t.healthData;
            exportHealthDataBtn.textContent = t.exportHealthData;
            document.querySelector('.tab-item[data-tab="chat"]').textContent = t.chat;
            document.querySelector('.bmi-calculator h3').textContent = t.bmi;
            document.querySelector('.card-title:has(.fa-leaf)').textContent = t.healthTips;
            document.querySelector('.card-title:has(.fa-question-circle)').textContent = t.quiz;
            startQuizBtn.textContent = t.startQuiz;
            printRecommendationsBtn.innerHTML = `<i class="fas fa-print"></i> ${t.print}`;
            saveRecommendationsBtn.innerHTML = `<i class="fas fa-save"></i> ${t.save}`;
            shareRecommendationsBtn.innerHTML = `<i class="fas fa-share"></i> ${t.share}`;
            [langEnBtn, langEsBtn, langFrBtn].forEach(btn => btn.classList.remove('active'));
            document.getElementById(`lang${lang.toUpperCase()}`).classList.add('active');
            localStorage.setItem('language', lang);
        }

        // Calculate BMI
        function calculateBMI() {
            const height = parseFloat(userHeightInput.value) / 100;
            const weight = parseFloat(userWeightInput.value);
            if (height > 0 && weight > 0) {
                const bmi = weight / (height * height);
                let bmiCategory = '';
                let bmiColor = '';
                if (bmi < 18.5) {
                    bmiCategory = 'Underweight';
                    bmiColor = 'var(--warning)';
                } else if (bmi < 25) {
                    bmiCategory = 'Normal weight';
                    bmiColor = 'var(--secondary)';
                } else if (bmi < 30) {
                    bmiCategory = 'Overweight';
                    bmiColor = 'var(--warning)';
                } else {
                    bmiCategory = 'Obese';
                    bmiColor = 'var(--danger)';
                }
                bmiResultDiv.innerHTML = `BMI: <strong>${bmi.toFixed(1)}</strong> - <span style="color: ${bmiColor}">${bmiCategory}</span>`;
            } else {
                bmiResultDiv.innerHTML = 'Fill in your height and weight to calculate BMI';
            }
        }

        // Sanitize input to prevent XSS
        function sanitizeInput(input) {
            const div = document.createElement('div');
            div.textContent = input;
            return div.innerHTML;
        }

        // Save user profile
        function saveUserProfile() {
            const userProfile = {
                name: sanitizeInput(document.getElementById('userName').value),
                age: document.getElementById('userAge').value,
                gender: document.getElementById('userGender').value,
                height: document.getElementById('userHeight').value,
                weight: document.getElementById('userWeight').value,
                lifestyle: sanitizeInput(document.getElementById('lifestyle').value),
                conditions: Array.from(document.querySelectorAll('[id^="condition"]:checked')).map(c => c.value),
                lastUpdated: new Date().toISOString()
            };
            localStorage.setItem('userProfile', JSON.stringify(userProfile));
            showNotification('Profile saved successfully!');
        }

        // Generate LaTeX for profile
        function generateProfileLatex(profile) {
            return `
\\documentclass[a4paper,12pt]{article}
\\usepackage[utf8]{inputenc}
\\usepackage{geometry}
\\geometry{margin=1in}
\\usepackage{enumitem}
\\usepackage{xcolor}
\\usepackage{parskip}
\\usepackage[T1]{fontenc}
\\usepackage{lmodern}

\\begin{document}

\\begin{center}
    {\\Large \\textbf{Health Profile}}\\\\
    \\vspace{0.5cm}
    {\\small Generated on ${new Date().toLocaleDateString()}}
\\end{center}

\\section*{Personal Information}
\\begin{description}[leftmargin=0cm]
    \\item[Name:] ${profile.name || 'Not provided'}
    \\item[Age:] ${profile.age || 'Not provided'}
    \\item[Gender:] ${profile.gender || 'Not provided'}
    \\item[Height:] ${profile.height ? profile.height + ' cm' : 'Not provided'}
    \\item[Weight:] ${profile.weight ? profile.weight + ' kg' : 'Not provided'}
\\end{description}

\\section*{Lifestyle}
${profile.lifestyle || 'Not provided'}

\\section*{Medical Conditions}
\\begin{itemize}
    ${profile.conditions?.length ? profile.conditions.map(c => `\\item ${c}`).join('\n') : '\\item None reported'}
\\end{itemize}

\\section*{BMI}
${(() => {
    const height = parseFloat(profile.height) / 100;
    const weight = parseFloat(profile.weight);
    if (height > 0 && weight > 0) {
        const bmi = (weight / (height * height)).toFixed(1);
        let category = bmi < 18.5 ? 'Underweight' : bmi < 25 ? 'Normal' : bmi < 30 ? 'Overweight' : 'Obese';
        return `BMI: ${bmi} (${category})`;
    }
    return 'Not calculated';
})()}

\\vspace{1cm}
{\\small \\textit{Last updated: ${new Date(profile.lastUpdated).toLocaleString()}}}

\\end{document}
            `;
        }

        // Download LaTeX as PDF (simplified for client-side)
        function downloadLatexAsPDF(latexContent, filename, title) {
            const blob = new Blob([latexContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
            showNotification(`LaTeX file for ${title} downloaded. Compile with PDFLaTeX to generate PDF.`);
        }

        // Export profile as PDF
        function exportProfileAsPDF() {
            const userProfile = JSON.parse(localStorage.getItem('userProfile') || '{}');
            if (!userProfile.name) {
                showNotification('No profile data to export!', 'error');
                return;
            }
            const latexContent = generateProfileLatex(userProfile);
            downloadLatexAsPDF(latexContent, 'health_profile.tex', 'Health Profile');
        }

        // Load user profile
        function loadUserProfile() {
            const userProfile = JSON.parse(localStorage.getItem('userProfile') || '{}');
            document.getElementById('userName').value = userProfile.name || '';
            document.getElementById('userAge').value = userProfile.age || '';
            document.getElementById('userGender').value = userProfile.gender || '';
            document.getElementById('userHeight').value = userProfile.height || '';
            document.getElementById('userWeight').value = userProfile.weight || '';
            document.getElementById('lifestyle').value = userProfile.lifestyle || '';
            (userProfile.conditions || []).forEach(condition => {
                const checkbox = document.querySelector(`[value="${condition}"]`);
                if (checkbox) checkbox.checked = true;
            });
            if (localStorage.getItem('darkMode') === 'true') {
                document.body.classList.add('dark-mode');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            }
            const fontSize = localStorage.getItem('fontSize');
            if (fontSize) setFontSize(fontSize);
            const lang = localStorage.getItem('language') || 'en';
            setLanguage(lang);
        }

        // Add medication
        function addMedication() {
            const medication = {
                id: Date.now(),
                name: sanitizeInput(document.getElementById('medicationName').value.trim()),
                time: document.getElementById('medicationTime').value,
                dosage: sanitizeInput(document.getElementById('medicationDosage').value.trim()),
                frequency: document.getElementById('medicationFrequency').value,
                created: new Date().toISOString()
            };
            if (!medication.name || !medication.time) {
                showNotification('Please enter medication name and time!', 'error');
                return;
            }
            const medications = getMedications();
            medications.push(medication);
            localStorage.setItem('medications', JSON.stringify(medications));
            document.getElementById('medicationName').value = '';
            document.getElementById('medicationTime').value = '';
            document.getElementById('medicationDosage').value = '';
            loadMedications();
            showNotification('Medication reminder added!');
        }

        // Get medications
        function getMedications() {
            return JSON.parse(localStorage.getItem('medications') || '[]');
        }

        // Load medications
        function loadMedications() {
            const medications = getMedications();
            if (medications.length === 0) {
                medicationList.innerHTML = '<p>No medications added yet.</p>';
                return;
            }
            medications.sort((a, b) => a.time.localeCompare(b.time));
            medicationList.innerHTML = medications.map(med => `
                <div class="reminder-item">
                    <div>
                        <strong>${med.name}</strong>
                        ${med.dosage ? `<span>(${med.dosage})</span>` : ''}
                        <small>(${med.frequency})</small>
                    </div>
                    <span class="reminder-time">${formatTime(med.time)}</span>
                    <button class="btn btn-danger" onclick="removeMedication(${med.id})">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `).join('');
        }

        // Remove medication
        function removeMedication(id) {
            const medications = getMedications().filter(med => med.id !== id);
            localStorage.setItem('medications', JSON.stringify(medications));
            loadMedications();
            showNotification('Medication removed!');
        }

        // Check medication reminders
        function checkMedicationReminders() {
            const now = new Date();
            const currentTime = `${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
            const medications = getMedications();
            medications.forEach(med => {
                if (med.frequency === 'daily' && med.time === currentTime) {
                    showNotification(`Time to take ${med.name}!`, 'reminder');
                }
            });
            setTimeout(checkMedicationReminders, 60000 - (now.getSeconds() * 1000));
        }

        // Format time
        function formatTime(timeString) {
            const [hours, minutes] = timeString.split(':');
            const hour = parseInt(hours, 10);
            const period = hour >= 12 ? 'PM' : 'AM';
            const displayHour = hour % 12 || 12;
            return `${displayHour}:${minutes} ${period}`;
        }

        // Add health goal
        function addHealthGoal() {
            const goal = {
                id: Date.now(),
                type: document.getElementById('goalType').value,
                target: parseInt(document.getElementById('goalTarget').value),
                progress: parseInt(document.getElementById('goalProgress').value) || 0,
                created: new Date().toISOString()
            };
            if (!goal.target) {
                showNotification('Please enter a target value!', 'error');
                return;
            }
            const goals = getHealthGoals();
            goals.push(goal);
            localStorage.setItem('healthGoals', JSON.stringify(goals));
            document.getElementById('goalType').value = 'steps';
            document.getElementById('goalTarget').value = '';
            document.getElementById('goalProgress').value = '';
            loadHealthGoals();
            showNotification('Health goal added!');
        }

        // Get health goals
        function getHealthGoals() {
            return JSON.parse(localStorage.getItem('healthGoals') || '[]');
        }

        // Load health goals
        function loadHealthGoals() {
            const goals = getHealthGoals();
            if (goals.length === 0) {
                healthGoalsList.innerHTML = '<p>No goals added yet.</p>';
                return;
            }
            healthGoalsList.innerHTML = goals.map(goal => {
                const progressPercentage = Math.min((goal.progress / goal.target) * 100, 100);
                return `
                    <div class="goal-item">
                        <div>
                            <strong>${goal.type.charAt(0).toUpperCase() + goal.type.slice(1)}</strong>
                            <p>${goal.progress}/${goal.target}</p>
                            <div class="goal-progress">
                                <div class="goal-progress-bar" style="width: ${progressPercentage}%"></div>
                            </div>
                        </div>
                        <button class="btn btn-danger" onclick="removeHealthGoal(${goal.id})">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `;
            }).join('');
        }

        // Remove health goal
        function removeHealthGoal(id) {
            const goals = getHealthGoals().filter(goal => goal.id !== id);
            localStorage.setItem('healthGoals', JSON.stringify(goals));
            loadHealthGoals();
            showNotification('Health goal removed!');
        }

        // Filter symptoms
        function filterSymptoms() {
            const searchTerm = symptomSearch.value.toLowerCase();
            const symptomItems = symptomsList.querySelectorAll('.symptom-item');
            symptomItems.forEach(item => {
                const symptomText = item.querySelector('label').textContent.toLowerCase();
                item.style.display = searchTerm ? (symptomText.includes(searchTerm) ? 'flex' : 'none') : 'flex';
            });
        }

        // Switch tabs
        function switchTab(tabName) {
            tabItems.forEach(tab => tab.classList.toggle('active', tab.dataset.tab === tabName));
            tabContents.forEach(content => content.classList.toggle('active', content.id === `${tabName}Tab`));
        }

        // Analyze symptoms
        async function analyzeSymptoms() {
            const selectedSymptoms = Array.from(document.querySelectorAll('[id^="symptom"]:checked')).map(s => s.value);
            if (selectedSymptoms.length === 0) {
                showNotification('Please select at least one symptom!', 'error');
                return;
            }
            const duration = document.getElementById('symptomDuration').value;
            const severity = document.getElementById('symptomSeverity').value;
            const details = sanitizeInput(document.getElementById('symptomDetails').value);
            loader.style.display = 'block';
            await new Promise(resolve => setTimeout(resolve, 2000));
            loader.style.display = 'none';
            const recommendations = generateRecommendations(selectedSymptoms, duration, severity, details);
            switchTab('recommendations');
            displayRecommendations(recommendations);
        }

        // Generate recommendations
        function generateRecommendations(symptoms, duration, severity, details) {
            const recommendations = [];
            const possibleConditions = identifyPossibleConditions(symptoms);
            possibleConditions.forEach(condition => {
                recommendations.push({
                    type: 'condition',
                    title: `Possible ${condition.name}`,
                    text: condition.description,
                    urgency: condition.urgency
                });
            });
            symptoms.forEach(symptom => {
                recommendations.push({
                    type: 'symptom',
                    title: `For ${symptom}`,
                    text: getRemediesForSymptom(symptom),
                    urgency: 'low'
                });
            });
            if (details.toLowerCase().includes('smoking')) {
                recommendations.push({
                    type: 'lifestyle',
                    title: 'Smoking Cessation',
                    text: 'Consider quitting smoking to improve your health. Resources like nicotine patches or counseling can help.',
                    urgency: 'medium'
                });
            }
            if (severity === '3' && possibleConditions.some(c => c.urgency === 'high')) {
                recommendations.unshift({
                    type: 'urgent',
                    title: 'Seek Medical Attention',
                    text: 'Based on your symptoms and their severity, we recommend consulting a healthcare professional immediately.',
                    urgency: 'high'
                });
            }
            recommendations.push({
                type: 'lifestyle',
                title: 'General Health Recommendations',
                text: 'Stay hydrated, get adequate rest, and maintain a balanced diet to support your immune system.',
                urgency: 'low'
            });
            return recommendations;
        }

        // Identify possible conditions
        function identifyPossibleConditions(symptoms) {
            const conditions = [];
            if (symptoms.includes('Cough') && symptoms.includes('Sore Throat') && (symptoms.includes('Headache') || symptoms.includes('Fever'))) {
                conditions.push({
                    name: 'Common Cold',
                    description: 'Rest, stay hydrated, and consider over-the-counter cold medications for symptom relief.',
                    urgency: 'low'
                });
            }
            if (symptoms.includes('Fever') && symptoms.includes('Fatigue') && (symptoms.includes('Muscle Aches') || symptoms.includes('Headache'))) {
                conditions.push({
                    name: 'Flu (Influenza)',
                    description: 'Rest, take fluids, and consider antiviral medications if diagnosed within 48 hours.',
                    urgency: 'medium'
                });
            }
            if ((symptoms.includes('Fever') || symptoms.includes('Cough')) && (symptoms.includes('Fatigue') || symptoms.includes('Shortness of Breath'))) {
                conditions.push({
                    name: 'COVID-19',
                    description: 'Consider getting tested and follow isolation guidelines.',
                    urgency: 'medium'
                });
            }
            if (symptoms.includes('Headache') && (symptoms.includes('Nausea') || symptoms.includes('Dizziness'))) {
                conditions.push({
                    name: 'Migraine',
                    description: 'Rest in a dark, quiet room and consider migraine-specific medication.',
                    urgency: 'low'
                });
            }
            if ((symptoms.includes('Nausea') || symptoms.includes('Vomiting')) && symptoms.includes('Diarrhea')) {
                conditions.push({
                    name: 'Gastroenteritis',
                    description: 'Stay hydrated and follow the BRAT diet (bananas, rice, applesauce, toast).',
                    urgency: 'medium'
                });
            }
            if (symptoms.includes('Rash') && (symptoms.includes('Shortness of Breath') || symptoms.includes('Sore Throat'))) {
                conditions.push({
                    name: 'Allergic Reaction',
                    description: 'Avoid potential allergens and consider antihistamines.',
                    urgency: 'medium'
                });
            }
            if (symptoms.includes('Chest Pain')) {
                conditions.push({
                    name: 'Cardiac Issue',
                    description: 'Chest pain can indicate a serious cardiac issue. Seek immediate medical attention.',
                    urgency: 'high'
                });
            }
            if (symptoms.includes('Shortness of Breath') && document.getElementById('symptomSeverity').value === '3') {
                conditions.push({
                    name: 'Respiratory Distress',
                    description: 'Severe shortness of breath requires immediate medical attention.',
                    urgency: 'high'
                });
            }
            return conditions;
        }

        // Get remedies for symptom
        function getRemediesForSymptom(symptom) {
            const remedies = {
                'Headache': 'Take over-the-counter pain relievers, stay hydrated, and rest in a quiet room.',
                'Fever': 'Use acetaminophen or ibuprofen, apply cool compresses, and stay hydrated.',
                'Cough': 'Use honey, stay hydrated, and consider cough suppressants or expectorants.',
                'Fatigue': 'Ensure adequate rest, maintain nutrition, and stay hydrated.',
                'Shortness of Breath': 'Use breathing techniques and seek medical help if severe.',
                'Sore Throat': 'Gargle with salt water, use lozenges, and drink warm liquids.',
                'Nausea': 'Try ginger tea, eat small meals, and stay hydrated.',
                'Diarrhea': 'Stay hydrated with electrolytes and follow the BRAT diet.',
                'Joint Pain': 'Rest, apply ice or heat, and use pain relievers.',
                'Chest Pain': 'Seek emergency care immediately.',
                'Dizziness': 'Sit or lie down, stay hydrated, and avoid sudden movements.',
                'Abdominal Pain': 'Use a heating pad, avoid trigger foods, and seek medical attention if severe.',
                'Rash': 'Use antihistamines or hydrocortisone cream and avoid scratching.',
                'Vomiting': 'Take small sips of clear liquids and avoid solid foods.',
                'Muscle Aches': 'Rest, apply heat, and use pain relievers.'
            };
            return remedies[symptom] || 'Consult a healthcare provider for specific advice.';
        }

        // Display recommendations
        function displayRecommendations(recommendations) {
            let html = '';
            const urgentRecs = recommendations.filter(rec => rec.urgency === 'high');
            if (urgentRecs.length > 0) {
                html += '<div style="background-color: #ffebee; padding: 20px; border-radius: 8px; margin-bottom: 25px; border-left: 5px solid var(--danger);">';
                urgentRecs.forEach(rec => {
                    html += `
                        <div class="recommendation-item" style="border-color: var(--danger); background-color: #ffebee;">
                            <h3 class="recommendation-title" style="color: var(--danger);">${rec.title}</h3>
                            <p class="recommendation-text">${rec.text}</p>
                        </div>
                    `;
                });
                html += '</div>';
            }
            const otherRecs = recommendations.filter(rec => rec.urgency !== 'high');
            otherRecs.forEach(rec => {
                const borderColor = rec.urgency === 'medium' ? 'var(--warning)' : 'var(--primary)';
                const bgColor = rec.urgency === 'medium' ? '#fff8e1' : '#f3f8ff';
                html += `
                    <div class="recommendation-item" style="border-color: ${borderColor}; background-color: ${bgColor};">
                        <h3 class="recommendation-title" style="color: ${borderColor};">${rec.title}</h3>
                        <p class="recommendation-text">${rec.text}</p>
                    </div>
                `;
            });
            html += `
                <div style="margin-top: 30px; font-size: 0.9rem; color: var(--gray); border-top: 1px solid #eee; padding-top: 20px;">
                    <p><strong>Disclaimer:</strong> This is not a substitute for professional medical advice. Consult a healthcare provider for accurate diagnosis and treatment.</p>
                </div>
            `;
            recommendationsList.innerHTML = html;
            sessionStorage.setItem('currentRecommendations', JSON.stringify(recommendations));
        }

        // Print recommendations
        function printRecommendations() {
            window.print();
        }

        // Share recommendations
        function shareRecommendations() {
            const recommendations = JSON.parse(sessionStorage.getItem('currentRecommendations') || '[]');
            if (recommendations.length === 0) {
                showNotification('No recommendations to share!', 'error');
                return;
            }
            const shareText = recommendations.map(rec => `${rec.title}: ${rec.text}`).join('\n\n');
            if (navigator.share) {
                navigator.share({
                    title: 'Health Recommendations',
                    text: shareText
                }).then(() => showNotification('Recommendations shared!'))
                  .catch(() => showNotification('Error sharing recommendations!', 'error'));
            } else {
                navigator.clipboard.writeText(shareText)
                    .then(() => showNotification('Recommendations copied to clipboard!'))
                    .catch(() => showNotification('Error copying recommendations!', 'error'));
            }
        }

        // Save to history
        function saveToHistory() {
            const recommendations = JSON.parse(sessionStorage.getItem('currentRecommendations') || '[]');
            if (recommendations.length === 0) {
                showNotification('No recommendations to save!', 'error');
                return;
            }
            const selectedSymptoms = Array.from(document.querySelectorAll('[id^="symptom"]:checked')).map(s => s.value);
            const historyRecords = getHistoryRecords();
            historyRecords.push({
                id: Date.now(),
                date: new Date().toISOString(),
                symptoms: selectedSymptoms,
                details: sanitizeInput(document.getElementById('symptomDetails').value),
                recommendations
            });
            localStorage.setItem('healthHistory', JSON.stringify(historyRecords));
            loadHealthHistory();
            showNotification('Recommendations saved to history!');
        }

        // Get history records
        function getHistoryRecords() {
            return JSON.parse(localStorage.getItem('healthHistory') || '[]');
        }

        // Load health history
        function loadHealthHistory() {
            const history = getHistoryRecords();
            if (history.length === 0) {
                historyList.innerHTML = '<p>No history records found.</p>';
                return;
            }
            history.sort((a, b) => new Date(b.date) - new Date(a.date));
            historyList.innerHTML = history.map(record => {
                const date = new Date(record.date);
                return `
                    <div class="history-item" onclick="viewHistoryRecord(${record.id})">
                        <h3>${record.symptoms.join(', ')}</h3>
                        <p>${record.details.slice(0, 100)}${record.details.length > 100 ? '...' : ''}</p>
                        <div class="history-date">${date.toLocaleString()}</div>
                    </div>
                `;
            }).join('');
        }

        // View history record
        function viewHistoryRecord(id) {
            const record = getHistoryRecords().find(rec => rec.id === id);
            if (record) {
                sessionStorage.setItem('currentRecommendations', JSON.stringify(record.recommendations));
                switchTab('recommendations');
                displayRecommendations(record.recommendations);
            }
        }

        // Generate LaTeX for history
        function generateHistoryLatex(records) {
            let latexContent = `
\\documentclass[a4paper,12pt]{article}
\\usepackage[utf8]{inputenc}
\\usepackage{geometry}
\\geometry{margin=1in}
\\usepackage{enumitem}
\\usepackage{xcolor}
\\usepackage{parskip}
\\usepackage[T1]{fontenc}
\\usepackage{lmodern}

\\begin{document}

\\begin{center}
    {\\Large \\textbf{Health History Report}}\\\\
    \\vspace{0.5cm}
    {\\small Generated on ${new Date().toLocaleDateString()}}
\\end{center}

\\section*{Summary}
Total health checks: ${records.length}

\\section*{Recent Health Checks}
\\begin{itemize}
`;

            records.slice(0, 5).forEach(record => {
                const date = new Date(record.date);
                latexContent += `
    \\item \\textbf{${date.toLocaleDateString()}} - ${record.symptoms.join(', ')}
    \\begin{itemize}
        \\item ${record.details.replace(/\n/g, ' ').substring(0, 100)}${record.details.length > 100 ? '...' : ''}
    \\end{itemize}
`;
            });

            latexContent += `
\\end{itemize}

\\end{document}
            `;
            return latexContent;
        }

        // Export history as PDF
        function exportHistoryAsPDF() {
            const history = getHistoryRecords();
            if (history.length === 0) {
                showNotification('No history to export!', 'error');
                return;
            }
            const latexContent = generateHistoryLatex(history);
            downloadLatexAsPDF(latexContent, 'health_history.tex', 'Health History');
        }

        // Initialize health metrics chart
        function initHealthMetricsChart() {
            const healthData = JSON.parse(localStorage.getItem('healthMetrics') || '[]');
            const labels = healthData.map((_, i) => `Day ${i + 1}`);
            const bloodPressureData = healthData.map(data => {
                const bp = data.bloodPressure?.split('/')[0] || 0;
                return parseInt(bp, 10);
            });
            const bloodSugarData = healthData.map(data => parseInt(data.bloodSugar || 0, 10));
            const cholesterolData = healthData.map(data => parseInt(data.cholesterol || 0, 10));
            const heartRateData = healthData.map(data => parseInt(data.heartRate || 0, 10));

            healthMetricsChart = new Chart(healthMetricsChartCtx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Blood Pressure (Systolic)',
                            data: bloodPressureData,
                            borderColor: 'var(--primary)',
                            backgroundColor: 'rgba(66, 133, 244, 0.1)',
                            tension: 0.1
                        },
                        {
                            label: 'Blood Sugar',
                            data: bloodSugarData,
                            borderColor: 'var(--secondary)',
                            backgroundColor: 'rgba(52, 199, 89, 0.1)',
                            tension: 0.1
                        },
                        {
                            label: 'Cholesterol',
                            data: cholesterolData,
                            borderColor: 'var(--danger)',
                            backgroundColor: 'rgba(219, 68, 55, 0.1)',
                            tension: 0.1
                        },
                        {
                            label: 'Heart Rate',
                            data: heartRateData,
                            borderColor: 'var(--warning)',
                            backgroundColor: 'rgba(244, 180, 0, 0.1)',
                            tension: 0.1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false
                        }
                    }
                }
            });
        }

        // Save health data
        function saveHealthData() {
            const healthData = {
                date: new Date().toISOString(),
                bloodPressure: document.getElementById('bloodPressure').value,
                bloodSugar: document.getElementById('bloodSugar').value,
                cholesterol: document.getElementById('cholesterol').value,
                heartRate: document.getElementById('heartRate').value,
                activityLevel: document.getElementById('activityLevel').value
            };
            const existingData = JSON.parse(localStorage.getItem('healthMetrics') || '[]');
            existingData.push(healthData);
            localStorage.setItem('healthMetrics', JSON.stringify(existingData));
            initHealthMetricsChart();
            showNotification('Health data saved!');
        }

        // Generate LaTeX for health data
        function generateHealthDataLatex(data) {
            return `
\\documentclass[a4paper,12pt]{article}
\\usepackage[utf8]{inputenc}
\\usepackage{geometry}
\\geometry{margin=1in}
\\usepackage{enumitem}
\\usepackage{xcolor}
\\usepackage{parskip}
\\usepackage[T1]{fontenc}
\\usepackage{lmodern}

\\begin{document}

\\begin{center}
    {\\Large \\textbf{Health Metrics Report}}\\\\
    \\vspace{0.5cm}
    {\\small Generated on ${new Date().toLocaleDateString()}}
\\end{center}

\\section*{Recent Measurements}
\\begin{itemize}
    ${data.slice(-5).map(entry => {
        const date = new Date(entry.date);
        return `
    \\item \\textbf{${date.toLocaleDateString()}}
    \\begin{itemize}
        ${entry.bloodPressure ? `\\item Blood Pressure: ${entry.bloodPressure} mmHg` : ''}
        ${entry.bloodSugar ? `\\item Blood Sugar: ${entry.bloodSugar} mg/dL` : ''}
        ${entry.cholesterol ? `\\item Cholesterol: ${entry.cholesterol} mg/dL` : ''}
        ${entry.heartRate ? `\\item Heart Rate: ${entry.heartRate} bpm` : ''}
        ${entry.activityLevel ? `\\item Activity Level: ${entry.activityLevel} steps` : ''}
    \\end{itemize}
        `;
    }).join('')}
\\end{itemize}

\\end{document}
            `;
        }

        // Export health data as PDF
        function exportHealthDataAsPDF() {
            const healthData = JSON.parse(localStorage.getItem('healthMetrics') || '[]');
            if (healthData.length === 0) {
                showNotification('No health data to export!', 'error');
                return;
            }
            const latexContent = generateHealthDataLatex(healthData);
            downloadLatexAsPDF(latexContent, 'health_metrics.tex', 'Health Metrics');
        }

        // Display health tips
        function displayHealthTips() {
            const tips = [
                "Drink at least 8 glasses of water daily to stay hydrated.",
                "Aim for 7-9 hours of sleep each night for optimal health.",
                "Include at least 30 minutes of moderate exercise in your daily routine.",
                "Eat a variety of fruits and vegetables for essential nutrients.",
                "Practice deep breathing exercises to reduce stress.",
                "Limit processed foods and sugars in your diet.",
                "Take regular breaks if you sit for long periods.",
                "Wash your hands frequently to prevent illness.",
                "Schedule regular health check-ups with your doctor.",
                "Practice good posture to prevent back and neck pain."
            ];
            healthTipsDiv.innerHTML = tips.map(tip => `
                <div class="tip-item">
                    <p>${tip}</p>
                </div>
            `).join('');
        }

        // Display daily quiz
        function displayDailyQuiz() {
            quizContent.innerHTML = `
                <p>Test your health knowledge with today's quiz!</p>
                <div class="actions">
                    <button type="button" class="btn btn-primary" id="startQuizBtn">Start Quiz</button>
                </div>
            `;
        }

        // Start daily quiz
        function startDailyQuiz() {
            let currentQuestion = 0;
            let score = 0;
            
            function showQuestion() {
                if (currentQuestion >= quizQuestions.length) {
                    showQuizResults();
                    return;
                }
                
                const question = quizQuestions[currentQuestion];
                let optionsHtml = question.options.map(option => `
                    <div class="quiz-option" onclick="checkAnswer('${option}')">
                        ${option}
                    </div>
                `).join('');
                
                quizContent.innerHTML = `
                    <div class="quiz-question">
                        <h3>Question ${currentQuestion + 1}: ${question.question}</h3>
                        <div class="quiz-options">
                            ${optionsHtml}
                        </div>
                    </div>
                    <div class="quiz-progress">
                        ${currentQuestion + 1} of ${quizQuestions.length}
                    </div>
                `;
            }
            
            function checkAnswer(selectedOption) {
                const question = quizQuestions[currentQuestion];
                const options = quizContent.querySelectorAll('.quiz-option');
                
                options.forEach(option => {
                    option.classList.remove('correct', 'incorrect');
                    if (option.textContent.trim() === question.correct) {
                        option.classList.add('correct');
                    } else if (option.textContent.trim() === selectedOption && selectedOption !== question.correct) {
                        option.classList.add('incorrect');
                    }
                    option.style.pointerEvents = 'none';
                });
                
                if (selectedOption === question.correct) {
                    score++;
                }
                
                currentQuestion++;
                setTimeout(showQuestion, 1500);
            }
            
            function showQuizResults() {
                quizContent.innerHTML = `
                    <h3>Quiz Completed!</h3>
                    <p>Your score: ${score} out of ${quizQuestions.length}</p>
                    <div class="actions">
                        <button type="button" class="btn btn-primary" onclick="displayDailyQuiz()">Try Again</button>
                    </div>
                `;
            }
            
            showQuestion();
        }

        // Show notification
        function showNotification(message, type = 'success') {
            notificationDiv.textContent = message;
            notificationDiv.style.backgroundColor = {
                'success': 'var(--primary)',
                'error': 'var(--danger)',
                'warning': 'var(--warning)',
                'reminder': 'var(--accent)'
            }[type];
            notificationDiv.classList.add('show');
            setTimeout(() => {
                notificationDiv.classList.remove('show');
            }, 3000);
        }

        // Send chat message
        function sendChatMessage() {
            const message = chatInput.value.trim();
            if (!message) return;
            
            addChatMessage(message, 'user');
            chatInput.value = '';
            
            // Simulate bot response after delay
            setTimeout(() => {
                const botResponse = generateBotResponse(message);
                addChatMessage(botResponse, 'bot');
            }, 1000);
        }

        // Send quick reply
        function sendQuickReply(message) {
            chatInput.value = message;
            sendChatMessage();
        }

        // Add chat message
        function addChatMessage(message, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}-message`;
            messageDiv.innerHTML = `<p>${sanitizeInput(message)}</p>`;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Generate bot response
        function generateBotResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('diet') || lowerMessage.includes('eat') || lowerMessage.includes('food')) {
                return "A healthy diet includes a variety of fruits, vegetables, whole grains, lean proteins, and healthy fats. Limit processed foods, sugar, and excessive salt. The Mediterranean diet is often recommended for its heart-healthy benefits.";
            } else if (lowerMessage.includes('exercise') || lowerMessage.includes('workout') || lowerMessage.includes('activity')) {
                return "Adults should aim for at least 150 minutes of moderate aerobic activity or 75 minutes of vigorous activity each week, plus muscle-strengthening activities on 2 or more days. Walking, swimming, and cycling are excellent options.";
            } else if (lowerMessage.includes('stress') || lowerMessage.includes('anxiety')) {
                return "To reduce stress, try deep breathing exercises, meditation, regular physical activity, maintaining a healthy sleep schedule, and connecting with friends and family. Consider talking to a professional if stress becomes overwhelming.";
            } else if (lowerMessage.includes('sleep') || lowerMessage.includes('rest')) {
                return "Most adults need 7-9 hours of sleep per night. Maintain a consistent sleep schedule, create a restful environment, limit screen time before bed, and avoid caffeine and large meals close to bedtime.";
            } else if (lowerMessage.includes('pain') || lowerMessage.includes('ache') || lowerMessage.includes('hurt')) {
                return "For minor pains, rest, ice or heat application, and over-the-counter pain relievers may help. However, persistent or severe pain should be evaluated by a healthcare professional.";
            } else if (lowerMessage.includes('weight') || lowerMessage.includes('bmi')) {
                return "Maintaining a healthy weight involves balancing calorie intake with physical activity. Focus on nutrient-dense foods and regular exercise. A BMI between 18.5 and 24.9 is generally considered healthy.";
            } else {
                return "I'm a health assistant here to provide general wellness information. For specific medical advice, please consult with a healthcare professional. How else can I help you today?";
            }
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);

        // Make functions available globally for HTML event handlers
        window.removeMedication = removeMedication;
        window.removeHealthGoal = removeHealthGoal;
        window.viewHistoryRecord = viewHistoryRecord;
        window.sendChatMessage = sendChatMessage;
        window.sendQuickReply = sendQuickReply;
        window.checkAnswer = function(selectedOption) {
            // This is a placeholder - the actual quiz answer checking is handled in the startDailyQuiz function
        };
    </script>
</body>
</html>